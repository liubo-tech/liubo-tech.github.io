(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{361:function(s,a,e){s.exports=e.p+"assets/img/types-of-mounts.cd09b2d7.png"},447:function(s,a,e){"use strict";e.r(a);var t=e(42),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"dockder学习笔记"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dockder学习笔记"}},[s._v("#")]),s._v(" Dockder学习笔记")]),s._v(" "),t("h2",{attrs:{id:"docker安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker安装"}},[s._v("#")]),s._v(" Docker安装")]),s._v(" "),t("p",[s._v("卸载系统原有docker：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum remove docker "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-client "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-client-latest "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-common "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-latest "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-latest-logrotate "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-logrotate "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-engine\n")])])]),t("p",[s._v("安装docker社区版：")]),s._v(" "),t("p",[s._v("设置docker仓库")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y yum-utils "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  device-mapper-persistent-data "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  lvm2\n")])])]),t("p",[s._v("添加yum源")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum-config-manager "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --add-repo "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    https://download.docker.com/linux/centos/docker-ce.repo\n")])])]),t("p",[s._v("安装docker：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce docker-ce-cli containerd.io\n")])])]),t("p",[s._v("启动docker服务：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start docker\n")])])]),t("p",[s._v("运行测试：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker run hello-world\n")])])]),t("p",[s._v("测试成功。")]),s._v(" "),t("p",[s._v("卸载docker：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum remove docker-ce\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf /var/lib/docker\n\n")])])]),t("h2",{attrs:{id:"docker基础命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker基础命令"}},[s._v("#")]),s._v(" docker基础命令")]),s._v(" "),t("p",[s._v("查看docker版本：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker --version\n")])])]),t("p",[s._v("查看本地镜像：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker image "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n")])])]),t("p",[s._v("查看本地容器：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker container "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" --all\n")])])]),t("h2",{attrs:{id:"构建自己的镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构建自己的镜像"}},[s._v("#")]),s._v(" 构建自己的镜像")]),s._v(" "),t("p",[s._v("构建示例：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/dockersamples/node-bulletin-board\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" node-bulletin-board/bulletin-board-app\n")])])]),t("p",[s._v("创建dockerfile：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Use the official image as a parent image")]),s._v("\nFROM node:current-slim\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Set the working directory")]),s._v("\nWORKDIR /usr/src/app\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Copy the file from your host to your current location")]),s._v("\nCOPY package.json "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Run the command inside your image filesystem")]),s._v("\nRUN "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Inform Docker that the container is listening on the specified port at runtime.")]),s._v("\nEXPOSE "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Run the specified command within the container.")]),s._v("\nCMD "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"start"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Copy the rest of your app's source code from your host to your image filesystem.")]),s._v("\nCOPY "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])])]),t("p",[s._v("构建镜像：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker image build -t bulletinboard:1.0 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])])]),t("p",[s._v("运行构建的镜像：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker container run --publish "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8000")]),s._v(":8080 --detach --name bb bulletinboard:1.0\n")])])]),t("ul",[t("li",[s._v("--publish 8000:8080   发布端口")]),s._v(" "),t("li",[s._v("--detach   后台运行")]),s._v(" "),t("li",[s._v("--name bb    指定容器名称")])]),s._v(" "),t("p",[s._v("强行删除容器：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker container "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" --force bb\n")])])]),t("p",[s._v("帮助："),t("code",[s._v("docker container --help")]),s._v("。")]),s._v(" "),t("p",[s._v("docker登录：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker login\n")])])]),t("p",[s._v("docker 打包：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker image tag bulletinboard:1.0 ronaldoliubo/bulletinboard:1.0\n")])])]),t("p",[s._v("推送镜像到docker hub：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker image push ronaldoliubo/bulletinboard:1.0\n")])])]),t("h2",{attrs:{id:"docker的数据管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker的数据管理"}},[s._v("#")]),s._v(" Docker的数据管理")]),s._v(" "),t("p",[t("img",{attrs:{src:e(361),alt:"types-of-mounts"}})]),s._v(" "),t("ul",[t("li",[s._v("volume：数据存储在主机上，非docker进程不能修改；")]),s._v(" "),t("li",[s._v("bind mount：数据存储在主机上，任何进程都可以修改；")])])])}),[],!1,null,null,null);a.default=n.exports}}]);