(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{367:function(t,s,a){t.exports=a.p+"assets/img/image-20200529111406337.c4a4dd35.png"},368:function(t,s,a){t.exports=a.p+"assets/img/image-20200529111825465.e3fdb7fd.png"},369:function(t,s){t.exports="data:image/png;base64,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"},370:function(t,s,a){t.exports=a.p+"assets/img/image-20200529112648501.6c26911c.png"},453:function(t,s,a){"use strict";a.r(s);var n=a(42),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"es7学习笔记-十三-geo位置搜索"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#es7学习笔记-十三-geo位置搜索"}},[t._v("#")]),t._v(" ES7学习笔记（十三）GEO位置搜索")]),t._v(" "),n("p",[t._v("ES的基本内容介绍的已经差不多了，最后我们再来看看"),n("strong",[t._v("GEO位置搜索")]),t._v("，现在大部分APP都有基于位置搜索的功能，比如：我们点外卖，可以按照离我们的距离进行排序，这样可以节省我们的配送费和送餐的时间；还有找工作时，也可以按照离自己家的距离进行排序，谁都想找个离家近的工作，对吧。这些功能都是基于GEO搜索实现的，目前支持GEO搜索功能的中间件有很多，像MySQL、Redis、ES等。我们看看在ES当中怎么实现GEO位置搜索。")]),t._v(" "),n("h2",{attrs:{id:"geo字段的创建"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#geo字段的创建"}},[t._v("#")]),t._v(" GEO字段的创建")]),t._v(" "),n("p",[t._v("GEO类型的字段是不能使用动态映射自动生成的，我们需要在创建索引时指定字段的类型为"),n("code",[t._v("geo_point")]),t._v("，"),n("code",[t._v("geo_point")]),t._v("类型的字段存储的经纬度，我们看看经纬度是怎么定义的，")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th"),t._v(" "),n("th",[t._v("英文")]),t._v(" "),n("th",[t._v("简写")]),t._v(" "),n("th",[t._v("正数")]),t._v(" "),n("th",[t._v("负数")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("维度")]),t._v(" "),n("td",[t._v("latitude")]),t._v(" "),n("td",[t._v("lat")]),t._v(" "),n("td",[t._v("北纬")]),t._v(" "),n("td",[t._v("南纬")])]),t._v(" "),n("tr",[n("td",[t._v("经度")]),t._v(" "),n("td",[t._v("longitude")]),t._v(" "),n("td",[t._v("lon或lng")]),t._v(" "),n("td",[t._v("东经")]),t._v(" "),n("td",[t._v("西经")])])])]),t._v(" "),n("p",[t._v("经度的简写有2个，一般常用的是lon，lng则在第三方地图的开放平台中使用比较多。下面我们先创建一个带有"),n("code",[t._v("geo_point")]),t._v("类型字段的索引，如下：")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("PUT /my_geo\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"settings"')]),t._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"analysis"')]),t._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"analyzer"')]),t._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),t._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"type"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ik_max_word"')]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(",\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mappings"')]),t._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dynamic_date_formats"')]),t._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MM/dd/yyyy"')]),t._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yyyy/MM/dd HH:mm:ss"')]),t._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yyyy-MM-dd"')]),t._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yyyy-MM-dd HH:mm:ss"')]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"properties"')]),t._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"location"')]),t._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"type"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"geo_point"')]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("创建了一个my_geo索引，在索引中有一些基础的配置，默认IK分词器，动态映射的时间格式。重点是最后我们添加了一个字段location，它的类型是"),n("code",[t._v("geo_point")]),t._v("。")]),t._v(" "),n("p",[t._v("索引创建完了，我们添加两条数据吧，假设，路人甲在北京站，路人乙在朝阳公园。那么我们怎么“北京站”和“朝阳公园”的经纬度呢？我们在做项目时，前端都会接地图控件，经纬度的信息可以调用地图控件的API获取。在咱们的示例中，也不接地图控件了，太麻烦了，直接在网上找到“北京站”和“朝阳公园”的坐标吧。")]),t._v(" "),n("p",[t._v("我们查到“北京站”的坐标如下：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(367),alt:"image-20200529111406337"}})]),t._v(" "),n("p",[t._v("然后添加一条数据：")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("POST /my_geo/_doc\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"路人甲"')]),t._v(",\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"location"')]),t._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lat"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("39.90279998006104")]),t._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lon"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("116.42703999493406")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("再查“朝阳公园”的坐标")]),t._v(" "),n("p",[n("img",{attrs:{src:a(368),alt:"image-20200529111825465"}})]),t._v(" "),n("p",[t._v("再添加“路人乙”的信息")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("POST /my_geo/_doc\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"路人乙"')]),t._v(",\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"location"')]),t._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lat"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("39.93367367974064")]),t._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lon"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("116.47845257733152")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("我们再用"),n("code",[t._v("elasticsearch-head")]),t._v("插件看一下索引中的数据：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(369),alt:"image-20200529112048114"}})]),t._v(" "),n("h2",{attrs:{id:"geo查询"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#geo查询"}},[t._v("#")]),t._v(" GEO查询")]),t._v(" "),n("p",[t._v("“路人甲”和“路人乙”的信息都有了，但是没有"),n("code",[t._v("location")]),t._v("字段的信息，因为"),n("code",[t._v("location")]),t._v("是特性类型的字段，在这里是展示不出来的。我们搜索一下吧，看看怎么用geo搜索，假设“我”的位置在“工体”，我们先要查到“工体”的坐标，")]),t._v(" "),n("p",[n("img",{attrs:{src:a(370),alt:"image-20200529112648501"}})]),t._v(" "),n("p",[t._v("然后再查询5km范围内都有谁，发送请求如下：")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("POST /my_geo/_search\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"query"')]),t._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bool"')]),t._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"filter"')]),t._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"geo_distance"')]),t._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"distance"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"5km"')]),t._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"location"')]),t._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lat"')]),t._v(":39.93031708627304,\n                        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lon"')]),t._v(":116.4470385453491\n                    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("在查询的时候用的是"),n("code",[t._v("filter")]),t._v("查询，再filter查询里再使用"),n("code",[t._v("geo_distance")]),t._v("查询，我们定义距离"),n("code",[t._v("distance")]),t._v("为5km，再指定geo类型的字段"),n("code",[t._v("location")]),t._v("，当前的坐标为：39.93031708627304N，116.4470385453491E。查询一下，看看结果：")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ……\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"hits"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"_index"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my_geo"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"_type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_doc"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"_id"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"AtgtXnIBOZNtuLQtIVdD"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"_score"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"_source"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"路人甲"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"location"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lat"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("39.90279998006104")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        \t\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lon"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("116.42703999493406")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"_index"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my_geo"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"_type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_doc"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"_id"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ZdguXnIBOZNtuLQtMVfA"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"_score"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"_source"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"路人乙"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"location"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lat"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("39.93367367974064")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        \t\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lon"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("116.47845257733152")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("看来，我们站在“工体”，“北京站”的路人甲和“朝阳公园”的路人乙都在5km的范围内。把范围缩短一点如何，改为3km看看，搜索的请求不变，只是把"),n("code",[t._v("distance")]),t._v("改为3km，看看结果吧，")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ……\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"hits"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"_index"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my_geo"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"_type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_doc"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"_id"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ZdguXnIBOZNtuLQtMVfA"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"_score"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"_source"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"路人乙"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"location"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lat"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("39.93367367974064")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        \t\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lon"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("116.47845257733152")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("只有在“朝阳公园”的路人乙被搜索了出来。完全符合预期，我们再看看程序中怎么使用GEO搜索。")]),t._v(" "),n("h2",{attrs:{id:"java-代码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#java-代码"}},[t._v("#")]),t._v(" JAVA 代码")]),t._v(" "),n("p",[t._v("在定义实体类时，对应的GEO字段要使用特殊的类型，如下：")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Setter")]),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Getter")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyGeo")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GeoPoint")]),t._v(" location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("location的类型是"),n("code",[t._v("GeoPoint")]),t._v("，添加数据的方法没有变化，转化成Json就可以了。再看看查询怎么用，")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("searchGeo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SearchRequest")]),t._v(" searchRequest "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SearchRequest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my_geo"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SearchSourceBuilder")]),t._v(" ssb "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SearchSourceBuilder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//工体的坐标")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GeoPoint")]),t._v(" geoPoint "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GeoPoint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("39.93367367974064d")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("116.47845257733152d")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//geo距离查询  name=geo字段")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("QueryBuilder")]),t._v(" qb "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("QueryBuilders")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("geoDistanceQuery")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"location"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//距离 3KM")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("distance")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3d")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DistanceUnit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("KILOMETERS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//坐标工体")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("point")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("geoPoint"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    ssb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("query")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("qb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    searchRequest"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("source")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ssb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SearchResponse")]),t._v(" response "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" client"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("search")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("searchRequest"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestOptions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DEFAULT"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SearchHit")]),t._v(" hit "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHits")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHits")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSourceAsString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("ul",[n("li",[t._v("SearchRequest指定索引"),n("code",[t._v("my_geo")])]),t._v(" "),n("li",[t._v("创建工体的坐标点"),n("code",[t._v("GeoPoint")])]),t._v(" "),n("li",[t._v("创建geo距离查询，指定geo字段"),n("code",[t._v("location")]),t._v("，距离3km，坐标点工体")]),t._v(" "),n("li",[t._v("其他的地方没有变化")])]),t._v(" "),n("p",[t._v("运行一下，看看结果，")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"路人乙"')]),t._v(","),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"location"')]),t._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lat"')]),t._v(":39.93360786576342,"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lon"')]),t._v(":116.47853840802"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("只有在“朝阳公园”的路人乙被查询了出来，符合预期。")]),t._v(" "),n("h2",{attrs:{id:"距离排序"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#距离排序"}},[t._v("#")]),t._v(" 距离排序")]),t._v(" "),n("p",[t._v("有的小伙伴可能会有这样的疑问，我不想按照距离去查询，只想把查询结果按照离“我”的距离排序，该怎么做呢？再看一下，")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("searchGeoSort")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SearchRequest")]),t._v(" searchRequest "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SearchRequest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my_geo"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SearchSourceBuilder")]),t._v(" ssb "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SearchSourceBuilder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//工体的坐标")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GeoPoint")]),t._v(" geoPoint "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GeoPoint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("39.93367367974064d")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("116.47845257733152d")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GeoDistanceSortBuilder")]),t._v(" sortBuilder "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SortBuilders")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("geoDistanceSort")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"location"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" geoPoint"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("order")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SortOrder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ASC"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    ssb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sort")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sortBuilder"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    searchRequest"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("source")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ssb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SearchResponse")]),t._v(" response "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" client"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("search")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("searchRequest"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestOptions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DEFAULT"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SearchHit")]),t._v(" hit "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHits")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHits")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSourceAsString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("这次查询并没有设置查询条件，而是创建了一个geo距离排序，同样，先指定geo字段"),n("code",[t._v("location")]),t._v("，和当前的坐标工体，再设置排序是升序。运行一下，看看结果，")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"路人乙"')]),t._v(","),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"location"')]),t._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lat"')]),t._v(":39.93360786576342,"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lon"')]),t._v(":116.47853840802"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"路人甲"')]),t._v(","),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"location"')]),t._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lat"')]),t._v(":39.902799980059335,"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lon"')]),t._v(":116.42721165631102"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("离“工体”比较近的“路人乙”排在了第一个，也是符合预期的。有问题大家评论区留言吧~")])])}),[],!1,null,null,null);s.default=e.exports}}]);