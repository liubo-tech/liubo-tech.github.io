<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>背景 | 牛初九博客</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="Java 技术 互联网 Spring Redis Mysql ">
    <meta name="keywords" content="Java 技术 互联网 Spring SpringBoot SpringCloud Elastic Search MySQL MyCAT 分布式 集群">
    
    <link rel="preload" href="/assets/css/0.styles.fab77d47.css" as="style"><link rel="preload" href="/assets/js/app.16ffb530.js" as="script"><link rel="preload" href="/assets/js/2.2805d820.js" as="script"><link rel="preload" href="/assets/js/19.0065f7d5.js" as="script"><link rel="prefetch" href="/assets/js/10.7af0fa3b.js"><link rel="prefetch" href="/assets/js/11.bf2b4ef3.js"><link rel="prefetch" href="/assets/js/12.ffa316c1.js"><link rel="prefetch" href="/assets/js/13.7bf9e28b.js"><link rel="prefetch" href="/assets/js/14.fe8172bf.js"><link rel="prefetch" href="/assets/js/15.12492866.js"><link rel="prefetch" href="/assets/js/16.1e0b9828.js"><link rel="prefetch" href="/assets/js/17.5274e857.js"><link rel="prefetch" href="/assets/js/18.14c495e2.js"><link rel="prefetch" href="/assets/js/20.15195b8f.js"><link rel="prefetch" href="/assets/js/21.a49d2486.js"><link rel="prefetch" href="/assets/js/22.7625f3ea.js"><link rel="prefetch" href="/assets/js/23.6829be75.js"><link rel="prefetch" href="/assets/js/24.d89bf6ba.js"><link rel="prefetch" href="/assets/js/25.f9c8e982.js"><link rel="prefetch" href="/assets/js/26.df00cb25.js"><link rel="prefetch" href="/assets/js/27.c2c39573.js"><link rel="prefetch" href="/assets/js/28.9d6955a7.js"><link rel="prefetch" href="/assets/js/29.793a5925.js"><link rel="prefetch" href="/assets/js/3.99170183.js"><link rel="prefetch" href="/assets/js/30.1d4eb018.js"><link rel="prefetch" href="/assets/js/31.c3635b83.js"><link rel="prefetch" href="/assets/js/32.39f76767.js"><link rel="prefetch" href="/assets/js/33.9623bd00.js"><link rel="prefetch" href="/assets/js/34.685b37ce.js"><link rel="prefetch" href="/assets/js/35.b6d262de.js"><link rel="prefetch" href="/assets/js/36.706cce0c.js"><link rel="prefetch" href="/assets/js/37.4b559cf9.js"><link rel="prefetch" href="/assets/js/38.8440f0a1.js"><link rel="prefetch" href="/assets/js/39.89829fe9.js"><link rel="prefetch" href="/assets/js/4.44e35b71.js"><link rel="prefetch" href="/assets/js/40.1eae592a.js"><link rel="prefetch" href="/assets/js/41.307e59e5.js"><link rel="prefetch" href="/assets/js/42.9c9598a9.js"><link rel="prefetch" href="/assets/js/43.6de9381c.js"><link rel="prefetch" href="/assets/js/44.0bda172b.js"><link rel="prefetch" href="/assets/js/45.7bd4678e.js"><link rel="prefetch" href="/assets/js/46.9601296c.js"><link rel="prefetch" href="/assets/js/47.8279d007.js"><link rel="prefetch" href="/assets/js/48.e8ae43c5.js"><link rel="prefetch" href="/assets/js/49.088eb890.js"><link rel="prefetch" href="/assets/js/5.7b7d1525.js"><link rel="prefetch" href="/assets/js/50.a104d084.js"><link rel="prefetch" href="/assets/js/51.0c101ee6.js"><link rel="prefetch" href="/assets/js/52.4269f250.js"><link rel="prefetch" href="/assets/js/53.1c55a938.js"><link rel="prefetch" href="/assets/js/54.dab6fc62.js"><link rel="prefetch" href="/assets/js/55.18a1bf4c.js"><link rel="prefetch" href="/assets/js/56.b2c0ee59.js"><link rel="prefetch" href="/assets/js/57.0a78afcc.js"><link rel="prefetch" href="/assets/js/58.d75522d5.js"><link rel="prefetch" href="/assets/js/59.2543ea7e.js"><link rel="prefetch" href="/assets/js/6.6d27b31c.js"><link rel="prefetch" href="/assets/js/60.16f65788.js"><link rel="prefetch" href="/assets/js/61.d6e2d8b6.js"><link rel="prefetch" href="/assets/js/62.183c4095.js"><link rel="prefetch" href="/assets/js/63.920617f0.js"><link rel="prefetch" href="/assets/js/64.5b2731e6.js"><link rel="prefetch" href="/assets/js/65.56420cc0.js"><link rel="prefetch" href="/assets/js/66.2ebd0c92.js"><link rel="prefetch" href="/assets/js/67.a414b285.js"><link rel="prefetch" href="/assets/js/68.989dacce.js"><link rel="prefetch" href="/assets/js/69.79a844b9.js"><link rel="prefetch" href="/assets/js/7.fee5c0b2.js"><link rel="prefetch" href="/assets/js/70.b789f7cb.js"><link rel="prefetch" href="/assets/js/71.90a71409.js"><link rel="prefetch" href="/assets/js/72.0dee4533.js"><link rel="prefetch" href="/assets/js/73.72b757a5.js"><link rel="prefetch" href="/assets/js/74.5cc6a8e7.js"><link rel="prefetch" href="/assets/js/75.a3efa729.js"><link rel="prefetch" href="/assets/js/76.ee52fbb0.js"><link rel="prefetch" href="/assets/js/77.2c257317.js"><link rel="prefetch" href="/assets/js/78.831d9b7b.js"><link rel="prefetch" href="/assets/js/79.7940520a.js"><link rel="prefetch" href="/assets/js/8.7f9f9c54.js"><link rel="prefetch" href="/assets/js/80.2f951622.js"><link rel="prefetch" href="/assets/js/81.fb674315.js"><link rel="prefetch" href="/assets/js/82.b9069b51.js"><link rel="prefetch" href="/assets/js/83.d718aedc.js"><link rel="prefetch" href="/assets/js/84.95180f04.js"><link rel="prefetch" href="/assets/js/85.3253eaff.js"><link rel="prefetch" href="/assets/js/86.3663d770.js"><link rel="prefetch" href="/assets/js/87.0c11349f.js"><link rel="prefetch" href="/assets/js/88.f5fac9dc.js"><link rel="prefetch" href="/assets/js/89.5e9c86e8.js"><link rel="prefetch" href="/assets/js/9.759c07c6.js"><link rel="prefetch" href="/assets/js/90.faeb161a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fab77d47.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">牛初九博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/gzh/gzh.html" class="nav-link">
  公众号
</a></div><div class="nav-item"><a href="/es/es.html" class="nav-link">
  ES系列
</a></div><div class="nav-item"><a href="/rocket/rocket.html" class="nav-link">
  RocketMQ系列
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="慕课课程" class="dropdown-title"><span class="title">慕课课程</span> <span class="arrow down"></span></button> <button type="button" aria-label="慕课课程" class="mobile-dropdown-title"><span class="title">慕课课程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://coding.imooc.com/class/341.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  精讲分布式定时任务
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://class.imooc.com/sale/javaarchitect" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java架构师直通车
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/gzh/gzh.html" class="nav-link">
  公众号
</a></div><div class="nav-item"><a href="/es/es.html" class="nav-link">
  ES系列
</a></div><div class="nav-item"><a href="/rocket/rocket.html" class="nav-link">
  RocketMQ系列
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="慕课课程" class="dropdown-title"><span class="title">慕课课程</span> <span class="arrow down"></span></button> <button type="button" aria-label="慕课课程" class="mobile-dropdown-title"><span class="title">慕课课程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://coding.imooc.com/class/341.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  精讲分布式定时任务
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://class.imooc.com/sale/javaarchitect" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java架构师直通车
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/article/nacos.html" class="sidebar-link">注册中心Nacos集群搭建</a></li><li><a href="/article/nacos-1.html" class="sidebar-link">Nacos配置中心和服务的注册发现</a></li><li><a href="/article/login.html" class="sidebar-link">怎样实现登录？| Cookie or JWT</a></li><li><a href="/article/oauth.html" aria-current="page" class="active sidebar-link">OAuth授权</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/article/oauth.html#背景" class="sidebar-link">背景</a></li><li class="sidebar-sub-header"><a href="/article/oauth.html#具体流程" class="sidebar-link">具体流程</a></li><li class="sidebar-sub-header"><a href="/article/oauth.html#与单点登录-sso-的对比" class="sidebar-link">与单点登录（SSO）的对比</a></li><li class="sidebar-sub-header"><a href="/article/oauth.html#oauth则是保障服务端-oauth-的用户资源的安全-。" class="sidebar-link">OAuth则是保障服务端（OAuth）的用户资源的安全 。</a></li><li class="sidebar-sub-header"><a href="/article/oauth.html#oauth获取的最终信息是-我-oauth-server-的用户的资源到底能不能让你-app1-访问。" class="sidebar-link">OAuth获取的最终信息是，我（OAuth Server）的用户的资源到底能不能让你（app1）访问。</a></li><li class="sidebar-sub-header"><a href="/article/oauth.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/article/sso.html" class="sidebar-link">SSO单点登录流程</a></li><li><a href="/article/front-back.html" class="sidebar-link">前后端分离 | 登录状态</a></li><li><a href="/article/MySQL+Keepalived.html" class="sidebar-link">MySQL+Keepalived高可用</a></li><li><a href="/article/mysql-ms.html" class="sidebar-link">MySQL主从同步配置</a></li><li><a href="/article/mysql-huan.html" class="sidebar-link">MySQL中的幻读，你真的理解吗？</a></li><li><a href="/article/db-pool.html" class="sidebar-link">数据库连接池数量设置为多少？</a></li><li><a href="/article/CSRF.html" class="sidebar-link">CSRF的原理与防御</a></li><li><a href="/article/redis-lock.html" class="sidebar-link">Redis分布式锁</a></li><li><a href="/article/limit.html" class="sidebar-link">MySql分页查询慢</a></li><li><a href="/article/taglib.html" class="sidebar-link">自制权限框架（一）jsp标签</a></li><li><a href="/article/annotation.html" class="sidebar-link">自制权限框架（二）注解</a></li><li><a href="/article/jmeter-1.html" class="sidebar-link">JMeter测试（一）</a></li><li><a href="/article/jmeter-2.html" class="sidebar-link">JMeter测试（二）</a></li><li><a href="/article/spring-security.html" class="sidebar-link">Spring Security实现RBAC权限管理</a></li><li><a href="/article/nginx1.html" class="sidebar-link">Nginx简介（一）</a></li><li><a href="/article/nginx2.html" class="sidebar-link">Nginx简介（二）</a></li><li><a href="/article/string.html" class="sidebar-link">String是值传递还是引用传递</a></li><li><a href="/article/redis-cluster.html" class="sidebar-link">Redis集群</a></li><li><a href="/article/cas.html" class="sidebar-link">CAS与OAuth2的区别</a></li><li><a href="/article/spring-eureka-2.html" class="sidebar-link">Eureka服务注册与发现</a></li><li><a href="/article/spring-mobile.html" class="sidebar-link">Spring Mobile</a></li><li><a href="/article/es-1.html" class="sidebar-link">ES学习（一）ES的安装与启动</a></li><li><a href="/article/es-2.html" class="sidebar-link">ES学习（二）ES的集群原理</a></li><li><a href="/article/es-3.html" class="sidebar-link">ES学习（三）新建索引</a></li><li><a href="/article/es-4.html" class="sidebar-link">ES学习（四）字段类型（mapping）</a></li><li><a href="/article/es-5.html" class="sidebar-link">ES学习（五）动态映射</a></li><li><a href="/article/es-6.html" class="sidebar-link">ES学习（六）分析器</a></li><li><a href="/article/es-7.html" class="sidebar-link">ES学习（七）IK中文分词器</a></li><li><a href="/article/es-8.html" class="sidebar-link">ES学习（八）数据的增删改</a></li><li><a href="/article/es-9.html" class="sidebar-link">ES学习（九）搜索</a></li><li><a href="/article/es-10.html" class="sidebar-link">ES学习（十）聚合查询</a></li><li><a href="/article/es-11.html" class="sidebar-link">ES学习（十一）与SpringBoot结合</a></li><li><a href="/article/es-12.html" class="sidebar-link">ES学习（十二）高亮 和 搜索建议</a></li><li><a href="/article/es-13.html" class="sidebar-link">ES学习（十三）GEO位置搜索</a></li><li><a href="/article/rocketmq-1.html" class="sidebar-link">RocketMQ系列（一）基本概念</a></li><li><a href="/article/rocketmq-2.html" class="sidebar-link">RocketMQ系列（二）环境搭建</a></li><li><a href="/article/rocketmq-3.html" class="sidebar-link">RocketMQ系列（三）消息的生产与消费</a></li><li><a href="/article/rocketmq-4.html" class="sidebar-link">RocketMQ系列（四）顺序消费</a></li><li><a href="/article/rocketmq-5.html" class="sidebar-link">RocketMQ系列（五）广播与延迟消息</a></li><li><a href="/article/rocketmq-6.html" class="sidebar-link">RocketMQ系列（六）批量发送与过滤</a></li><li><a href="/article/rocketmq-7.html" class="sidebar-link">RocketMQ系列（七）事务消息</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="背景"><a href="#背景" class="header-anchor">#</a> 背景</h2> <p>上一篇我们介绍了单点登录（SSO），它能够实现多个系统的统一认证。今天我们来谈一谈近几年来非常流行的，大名鼎鼎的OAuth。它也能完成
统一认证，而且还能做更多的事情。至于OAuth与SSO的区别，将在文章最后总结。</p> <p><img src="data:image/png;base64,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" alt="image1"></p> <p>如上图所示，用户通过浏览器（Browser）访问app1，他想用微信的账号直接登录，这样就免去了在app1系统的注册流程。这样的流程完全符合
单点登录（SSO），但我们今天要看看OAuth是怎么做的。</p> <h2 id="具体流程"><a href="#具体流程" class="header-anchor">#</a> 具体流程</h2> <p><img src="/assets/img/oauth-2.6e0fca73.png" alt="image2"></p> <p>流程比单点登录（SSO）复杂了很多，但是它比SSO更强大。接下来我们好好捋一捋这个流程：</p> <ol><li>用户访问app1系统，app1返回登录页，让用户登录。</li> <li>用户点击微信登录，这里的微信就是OAuth Server，跳转到微信登录页，带上参数appid和回调地址（backUrl）。关于appid我们要详细
说一下，我们在与OAuth Server做对接的时候，先要在OAuth Server上注册自己的系统（app1），需要填写应用的名称、回调地址等，
OAuth Server会生成appid和appSecret，这两个变量是非常关键的。</li> <li>微信后台（OAuth Server）根据appid查找到app1的注册信息，校验参数backUrl和注册的回调地址是否一致（这里可以只校验域名或者一级域名，
具体要看OAuth Server怎么设计），如果校验不通过则返回错误，校验成功则返回授权页。</li> <li>微信弹出授权页，如果微信没有登录则弹出登录并授权页。这个过程是微信询问用户，是否同意app1系统访问微信的资源。用户授权后，
微信后台（OAuth Server）会生成这个用户对应的code，并通过app1的backUrl返回app1系统。</li> <li>app1系统拿到code后，再带上appid和appSecret从后台访问微信后台（OAuth Server），换取用户的token。</li> <li>app1拿到token后，再去微信后台（OAuth Server）获取用户的信息。</li> <li>app1设置session为登录状态，并将用户信息（昵称、头像等）返回给Browser。</li></ol> <p>到这里，OAuth的授权流程就结束了。<strong>有的同学可能很快就会问到：用户授权后，为什么不直接返回token，而是要用code换取token？
这是因为如果直接返回token，token会先到浏览器（Browser），然后再到app1系统，到了浏览器，这个token就是不安全的了，有可能被
窃取，token被窃取后，微信后台（OAuth Server）中，这个用户的信息就不安全了。然而在用code换取token时，是带上了appid和appSecret
的，微信后台（OAuth Server）可以判断appid和appSecret的合法性，确认无误后，再将token返回给app1。这里是直接返回app1，没有经过浏览器，
token是安全的。</strong></p> <h3 id="静默登录"><a href="#静默登录" class="header-anchor">#</a> 静默登录</h3> <p>上面的流程是用户先访问app1，点击微信登录后，跳到微信。如果我们先打开了微信，在微信里边再打开app1，这个流程就好像我们在
微信里打开了京东，这里微信就是OAuth Server，京东就是app1。在这个流程中，我们可以省略掉询问用户是否授权的过程，也就是在微信里
打开京东（app1）的时候，京东（app1）带着appid和backUrl访问微信（OAuth Server），微信（OAuth Server）验证appid和backUrl，
并且微信（OAuth Server）已经是登录的，这里并没有询问用户是否授权京东访问自己在微信的资源，直接将code返回给了京东。从而使
京东登录，并且在京东里显示的用户在微信中的昵称和头像等信息。</p> <p>使用静默登录一般都是你的系统做的比较牛了，被资源方看中了，要把你的系统嵌入到资源方去。比如：微信中嵌入了京东。</p> <p>上面的例子中，我们只做了获取用户信息，其实还可以开放很多信息，例如：用户的账户余额等。要开放哪些资源就看OAuth Server的了。
这也就是我们常说的open api。要做open api，上面的OAuth流程是必不可少的。</p> <h2 id="与单点登录-sso-的对比"><a href="#与单点登录-sso-的对比" class="header-anchor">#</a> 与单点登录（SSO）的对比</h2> <p>单点登录（SSO）是保障客户端（app1）的用户资源的安全 。</p> <h2 id="oauth则是保障服务端-oauth-的用户资源的安全-。"><a href="#oauth则是保障服务端-oauth-的用户资源的安全-。" class="header-anchor">#</a> OAuth则是保障服务端（OAuth）的用户资源的安全 。</h2> <p>单点登录（SSO）的客户端（app1）要获取的最终信息是，这个用户到底有没有权限访问我（app1）的资源。</p> <h2 id="oauth获取的最终信息是-我-oauth-server-的用户的资源到底能不能让你-app1-访问。"><a href="#oauth获取的最终信息是-我-oauth-server-的用户的资源到底能不能让你-app1-访问。" class="header-anchor">#</a> OAuth获取的最终信息是，我（OAuth Server）的用户的资源到底能不能让你（app1）访问。</h2> <p>单点登录（SSO），资源都在客户端（app1）这边，不在SSO Server那一方。 用户在给SSO Server提供了用户名密码后，作为客户端app1并不知道这件事。
随便给客户端（app1）个ST，那么客户端（app1）是不能确定这个ST是否有效，所以要拿着这个ST去SSO Server再问一下，这个ST是否有效，
是有效的我（app1）才能让这个用户访问。</p> <p>OAuth认证，资源都在OAuth Server那一方，客户端（app1）想获取OAuth Server的用户资源。 所以在最安全的模式下，用户授权之后，
服务端（OAuth Server）并不能通过重定向将token发给客户端（app1），因为这个token有可能被黑客截获，如果黑客截获了这个token，
那么用户的资源（OAuth Server）也就暴露在这个黑客之下了。 于是OAuth Server通过重定向发送了一个认证code给客户端（app1），
客户端（app1）在后台，通过https的方式，用这个code，以及客户端和服务端预先商量好的密码（appid和appSecret），才能获取到token，
这个过程是非常安全的。 如果黑客截获了code，他没有那串预先商量好的密码（appid和appSecret），他也是无法获取token的。
这样OAuth就能保证请求资源这件事，是用户同意的，客户端（app1）也是被认可的，可以放心的把资源发给这个客户端（app1）了。</p> <p><strong>总结：所以单点登录（SSO）和OAuth在流程上的最大区别就是，通过ST或者code去认证的时候，需不需要预先商量好的密码（appid和appSecret）。</strong></p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>OAuth和SSO都可以做统一认证登录，但是OAuth的流程比SSO复杂。SSO只能做用户的认证登录，OAuth不仅能做用户的认证登录，开可以做
open api开放更多的用户资源。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/article/login.html" class="prev">
        怎样实现登录？| Cookie or JWT
      </a></span> <span class="next"><a href="/article/sso.html">
        SSO单点登录流程
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.16ffb530.js" defer></script><script src="/assets/js/2.2805d820.js" defer></script><script src="/assets/js/19.0065f7d5.js" defer></script>
  </body>
</html>
